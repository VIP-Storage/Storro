"use strict";(self.webpackChunkstorro=self.webpackChunkstorro||[]).push([[58],{5058:(Ot,O,a)=>{a.r(O),a.d(O,{ClientPagesModule:()=>ft});var l=a(8583),t=a(7716),m=a(6215),h=a(3342),D=a(5917),r=(()=>{return(n=r||(r={}))[n.OPEN=0]="OPEN",n[n.CLOSED=1]="CLOSED",r;var n})(),s=(()=>{return(n=s||(s={}))[n.UNLOCKED=0]="UNLOCKED",n[n.LOCKED=1]="LOCKED",n[n.ALARM=3]="ALARM",s;var n})();const x=[{name:"Demo Unit 1",location:"Your Mom's House"},{name:"Demo Unit 2",location:"Your Mom's Mom's House"},{name:"Demo Unit 3",location:"Hell"},{name:"Demo Unit 4",location:"Comcast World Headquarters"}],Z=[{lastAccessed:new Date,lastHumidity:78.5,lastTemperature:69,doorState:r.OPEN,state:s.ALARM},{lastAccessed:new Date,lastHumidity:78.5,lastTemperature:55,doorState:r.CLOSED,state:s.LOCKED},{lastAccessed:new Date,lastHumidity:0,lastTemperature:102,doorState:r.OPEN,state:s.UNLOCKED},{lastAccessed:new Date,lastHumidity:42.7,lastTemperature:88.2,doorState:r.CLOSED,state:s.LOCKED}];var E=a(3637),N=a(7393),v=a(3098);function U(n,i=E.P){const o=function(n){return n instanceof Date&&!isNaN(+n)}(n)?+n-i.now():Math.abs(n);return d=>d.lift(new w(o,i))}class w{constructor(i,e){this.delay=i,this.scheduler=e}call(i,e){return e.subscribe(new f(i,this.delay,this.scheduler))}}class f extends N.L{constructor(i,e,o){super(i),this.delay=e,this.scheduler=o,this.queue=[],this.active=!1,this.errored=!1}static dispatch(i){const e=i.source,o=e.queue,d=i.scheduler,C=i.destination;for(;o.length>0&&o[0].time-d.now()<=0;)o.shift().notification.observe(C);if(o.length>0){const Ct=Math.max(0,o[0].time-d.now());this.schedule(i,Ct)}else this.unsubscribe(),e.active=!1}_schedule(i){this.active=!0,this.destination.add(i.schedule(f.dispatch,this.delay,{source:this,destination:this.destination,scheduler:i}))}scheduleNotification(i){if(!0===this.errored)return;const e=this.scheduler,o=new H(e.now()+this.delay,i);this.queue.push(o),!1===this.active&&this._schedule(e)}_next(i){this.scheduleNotification(v.P.createNext(i))}_error(i){this.errored=!0,this.queue=[],this.destination.error(i),this.unsubscribe()}_complete(){this.scheduleNotification(v.P.createComplete()),this.unsubscribe()}}class H{constructor(i,e){this.time=i,this.notification=e}}let T=(()=>{class n{constructor(){}getUnits(){return this.getDemoUnits()}getUnitData(e){return this.getDemoUnitData(e)}getDemoUnits(){return(0,D.of)(x).pipe(U(150))}getDemoUnitData(e){return(0,D.of)((n=>{const i=x.indexOf(n);return null!=i?Z[i]:null})(e)).pipe(U(150),(0,h.b)(o=>console.log("Demo unit data",o)))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var p=a(4929),y=a(4885);let Y=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-loading-shade"]],decls:1,vars:0,consts:[["diameter","22"]],template:function(e,o){1&e&&t._UZ(0,"mat-spinner",0)},directives:[y.$g],styles:["[_nghost-%COMP%]{display:flex;position:absolute;top:0;bottom:0;left:0;right:0;justify-content:center;align-items:center}"]}),n})();var I=a(5435),c=(()=>{return(n=c||(c={})).DOOR="Door",n.HUMIDITY="Humidity",n.TEMP="Temperature",n.STATE="State",c;var n})(),u=a(3738),B=a(2298),F=a(8002),A=a(2458);const b="adjust",_="water";class g{static getUnitStateIcon(i){switch(i){case s.ALARM:return"notifications";case s.LOCKED:return"lock";case s.UNLOCKED:return"no_encryption"}}static getUnitStateColor(i){switch(i){case s.ALARM:return"red";case s.LOCKED:return"green";case s.UNLOCKED:return"blue"}}static getUnitStateText(i){switch(i){case s.ALARM:return"Alarm";case s.LOCKED:return"Locked";case s.UNLOCKED:return"Unlocked"}}static getDoorStateIcon(i){switch(i){case r.CLOSED:return"door_front";case r.OPEN:return"meeting_room"}}static getDoorStateText(i){switch(i){case r.CLOSED:return"Closed";case r.OPEN:return"Open"}}static getDoorStateColor(i){switch(i){case r.CLOSED:return"red";case r.OPEN:return"green"}}static getTemperatureColor(i){return i>=90?"red":i<=32?"blue":"green"}static getHumidityColor(i){return i>=90?"red":"green"}static getDoorStateData(i){return{icon:this.getDoorStateIcon(i),text:this.getDoorStateText(i),iconColor:this.getDoorStateColor(i)}}static getUnitStateData(i){let e;return i===s.ALARM&&(e={icon:"error_outline",text:"An alarm has been tripped"}),{icon:this.getUnitStateIcon(i),text:this.getUnitStateText(i),iconColor:this.getUnitStateColor(i),badge:e}}static getTemperatureData(i){let e;return i>95?e={icon:b,text:"The temperature is above the specified threshold"}:i<31&&(e={icon:b,text:"The temperature is below the specified threshold"}),{icon:"thermostat",text:`${i} F`,iconColor:this.getTemperatureColor(i),badge:e}}static getHumidityData(i){let e;return i>95&&(e={icon:_,text:"The humidity level is above the specified threshold"}),{icon:_,text:`${i}%`,iconColor:this.getHumidityColor(i),badge:e}}}var q=a(1552),$=a(346),k=a(8477);function W(n,i){if(1&n&&(t.TgZ(0,"mat-icon"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.Akn(e.iconColorStyle),t.xp6(1),t.Oqu(e.icon)}}function V(n,i){1&n&&t._UZ(0,"mat-spinner",10)}function tt(n,i){if(1&n&&(t.YNc(0,W,2,3,"mat-icon",8),t.ALo(1,"async"),t.YNc(2,V,1,0,"ng-template",null,9,t.W1O)),2&n){const e=t.MAs(3),o=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,o.hasLoaded))("ngIfElse",e)}}function et(n,i){}function nt(n,i){if(1&n&&(t.TgZ(0,"div",11),t.YNc(1,et,0,0,"ng-template",12),t.qZA()),2&n){const e=t.oxw(),o=t.MAs(1);t.Q6J("matBadge",e.badge.icon)("matTooltip",e.badge.text),t.xp6(1),t.Q6J("ngTemplateOutlet",o)}}function it(n,i){}function ot(n,i){if(1&n&&(t.TgZ(0,"div",13),t.YNc(1,it,0,0,"ng-template",12),t.qZA()),2&n){t.oxw();const e=t.MAs(1);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function at(n,i){if(1&n&&(t.TgZ(0,"span",14),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.text)}}function st(n,i){1&n&&t._UZ(0,"mat-spinner",10)}let rt=(()=>{class n{constructor(){this.indicatorClicked=e=>{this.clickable&&(this.ripple.launch(e.x,e.y),this.updateUnitData())},this.clickable=!1,this.updated=new t.vpe(!0),this.data=new B.t,this.hasLoaded=new m.X(!1)}set unitData(e){e&&this.data.next(e)}set type(e){this._indicatorType=e,this.title=e.toString().toLowerCase()}ngOnInit(){this.data.pipe((0,I.h)(e=>!!e),(0,h.b)(e=>this._currentData=e),(0,F.U)(e=>{switch(this._indicatorType){case c.DOOR:return this.clickable=!0,g.getDoorStateData(e.doorState);case c.HUMIDITY:return g.getHumidityData(e.lastHumidity);case c.TEMP:return g.getTemperatureData(e.lastTemperature);case c.STATE:return g.getUnitStateData(e.state)}})).subscribe(e=>{this.icon=e.icon,this.iconColorStyle=`color: ${(n=>{switch(n){case"green":return"#76ff03";case"red":return"#ff1744";case"blue":return"#2962ff";default:return"#000"}})(e.iconColor)};`,this.text=e.text,this.badge=e.badge,this.hasLoaded.next(!0)})}dataHasBadge(e){return!!e.badge&&e.badge.hasOwnProperty("icon")}updateUnitData(){switch(this._indicatorType){case c.DOOR:this.updateDoorState()}this.data.next(this._currentData),this.updated.emit(this._currentData)}updateDoorState(){this._currentData.doorState=this._currentData.doorState===r.OPEN?r.CLOSED:r.OPEN}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-unit-indicator"]],viewQuery:function(e,o){if(1&e&&t.Gf(A.wG,5),2&e){let d;t.iGM(d=t.CRH())&&(o.ripple=d.first)}},hostVars:2,hostBindings:function(e,o){1&e&&t.NdJ("click",function(C){return o.indicatorClicked(C)}),2&e&&t.ekj("clickable",o.clickable)},inputs:{unitData:"unitData",type:"type"},outputs:{updated:"updated"},decls:13,vars:9,consts:[["iconWrapper",""],["class","icon-wrapper has-badge","matBadgeOverlap","true","matBadgeSize","small","matTooltipPosition","after",3,"matBadge","matTooltip",4,"ngIf"],["class","icon-wrapper no-badge",4,"ngIf"],[1,"indicator-text"],[1,"indicator-title"],["class","indicator-value",4,"ngIf","ngIfElse"],["textLoading",""],["matRipple","",1,"ripple-wrapper"],[3,"style",4,"ngIf","ngIfElse"],["iconLoading",""],["diameter","18"],["matBadgeOverlap","true","matBadgeSize","small","matTooltipPosition","after",1,"icon-wrapper","has-badge",3,"matBadge","matTooltip"],[3,"ngTemplateOutlet"],[1,"icon-wrapper","no-badge"],[1,"indicator-value"]],template:function(e,o){if(1&e&&(t.YNc(0,tt,4,4,"ng-template",null,0,t.W1O),t.YNc(2,nt,2,3,"div",1),t.YNc(3,ot,2,1,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"span",4),t._uU(6),t.ALo(7,"titlecase"),t.qZA(),t.YNc(8,at,2,1,"span",5),t.ALo(9,"async"),t.YNc(10,st,1,0,"ng-template",null,6,t.W1O),t.qZA(),t._UZ(12,"div",7)),2&e){const d=t.MAs(11);t.xp6(2),t.Q6J("ngIf",o.badge),t.xp6(1),t.Q6J("ngIf",!o.badge),t.xp6(3),t.Oqu(t.lcZ(7,5,o.title)),t.xp6(2),t.Q6J("ngIf",t.lcZ(9,7,o.hasLoaded))("ngIfElse",d)}},directives:[l.O5,A.wG,q.Hw,y.$g,$.k,k.gM,l.tP],pipes:[l.rS,l.Ov],styles:['[_nghost-%COMP%]{background-color:#b39ddb33;border-radius:8px;display:flex;justify-content:space-between;align-items:center;padding:0 12px;flex:1}.clickable[_nghost-%COMP%]{cursor:pointer}.icon-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:.4rem;background:white;border-radius:8px;margin-right:8px;margin-left:-2px}.icon-wrapper.has-badge[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{font-family:"Material Icons",emoji;background-color:red;font-size:13px;line-height:17px;pointer-events:none}.indicator-text[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-between;align-items:center}.indicator-text[_ngcontent-%COMP%]   .indicator-title[_ngcontent-%COMP%]{color:#9575cde6}.indicator-text[_ngcontent-%COMP%]   .indicator-value[_ngcontent-%COMP%]{font-weight:500;font-size:1rem}.ripple-wrapper[_ngcontent-%COMP%]{pointer-events:none;position:absolute;top:0;bottom:0;left:0;right:0}']}),n})();function ct(n,i){if(1&n&&(t.TgZ(0,"mat-grid-tile",3),t._UZ(1,"app-unit-indicator",4),t.ALo(2,"async"),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("type",e)("unitData",t.lcZ(2,2,o.unitData))}}let lt=(()=>{class n{constructor(e){this.unitsService=e,this.unitIndicators=[c.DOOR,c.HUMIDITY,c.STATE,c.TEMP],this._unitData=new m.X(null),this.unitData=this._unitData.pipe((0,I.h)(o=>!!o))}set unit(e){this._unit=e,this.unitsService.getUnitData(e).subscribe(this._unitData)}get unit(){return this._unit}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-unit-preview"]],inputs:{unit:"unit"},decls:9,vars:3,consts:[[1,"mat-elevation-z0","unit-card"],["cols","2","rowHeight","55px","gutterSize","5px"],["class","unit-indicator-tile",4,"ngFor","ngForOf"],[1,"unit-indicator-tile"],[3,"type","unitData"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0),t.TgZ(1,"mat-card-header"),t.TgZ(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"mat-card-content"),t.TgZ(7,"mat-grid-list",1),t.YNc(8,ct,3,4,"mat-grid-tile",2),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",o.unit.name," "),t.xp6(2),t.hij(" ",o.unit.location," "),t.xp6(3),t.Q6J("ngForOf",o.unitIndicators))},directives:[u.a8,u.dk,u.n5,u.$j,u.dn,p.Il,l.sg,p.DX,rt],pipes:[l.Ov],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.mat-card[_ngcontent-%COMP%]{flex:1;border-radius:8px;padding:.8em}.unit-card[_ngcontent-%COMP%]  .mat-card-header-text{margin-left:5px;margin-top:8px}.unit-card[_ngcontent-%COMP%]  .mat-card-header-text mat-card-subtitle{margin-bottom:8px}"]}),n})();function dt(n,i){1&n&&t._UZ(0,"app-loading-shade")}function ut(n,i){if(1&n&&(t.TgZ(0,"mat-grid-tile",5),t._UZ(1,"app-unit-preview",6),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("unit",e)}}let pt=(()=>{class n{constructor(e){this.unitsService=e,this.isLoading=new m.X(!0),this.units=this.unitsService.getUnits().pipe((0,h.b)(()=>this.isLoading.next(!1)))}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-units-grid"]],decls:7,vars:6,consts:[[1,"units-grid-inner"],[4,"ngIf"],[1,"grid-list-wrapper"],["cols","2","rowHeight","200px","gutterSize","15px"],["class","unit-tile",4,"ngFor","ngForOf"],[1,"unit-tile"],[3,"unit"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,dt,1,0,"app-loading-shade",1),t.ALo(2,"async"),t.TgZ(3,"div",2),t.TgZ(4,"mat-grid-list",3),t.YNc(5,ut,2,1,"mat-grid-tile",4),t.ALo(6,"async"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,o.isLoading)),t.xp6(4),t.Q6J("ngForOf",t.lcZ(6,4,o.units)))},directives:[l.O5,p.Il,l.sg,Y,p.DX,lt],pipes:[l.Ov],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.units-grid-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.6em;font-weight:500}.unit-tile[_ngcontent-%COMP%]  .mat-grid-tile-content{flex-direction:column;justify-content:unset!important;align-items:unset!important}.grid-list-wrapper[_ngcontent-%COMP%]{margin-top:1em}"]}),n})(),gt=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-client-dashboard"]],decls:6,vars:0,consts:[[1,"section"],[1,"section-title"],[1,"section-content"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"span"),t._uU(3,"Units"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t._UZ(5,"app-units-grid"),t.qZA(),t.qZA())},directives:[pt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;padding:2.5em;flex:1}"]}),n})();var M=a(9763),mt=a(2271);const ht=[{path:"dashboard",component:gt}];let ft=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,M.Bz.forChild(ht),mt.m],M.Bz]}),n})()}}]);