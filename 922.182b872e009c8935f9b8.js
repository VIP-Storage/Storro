"use strict";(self.webpackChunkstorro=self.webpackChunkstorro||[]).push([[922],{4922:(Yt,O,o)=>{o.r(O),o.d(O,{ClientPagesModule:()=>Nt});var l=o(8583),t=o(7716),v=o(6215),x=o(3342),D=o(4331),T=o(4929),Z=o(4885);let Q=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-loading-shade"]],decls:1,vars:0,consts:[["diameter","22"]],template:function(e,i){1&e&&t._UZ(0,"mat-spinner",0)},directives:[Z.$g],styles:["[_nghost-%COMP%]{display:flex;position:absolute;top:0;bottom:0;left:0;right:0;justify-content:center;align-items:center}"]}),a})();var h=o(5435),s=(()=>{return(a=s||(s={})).DOOR="Door",a.HUMIDITY="Humidity",a.TEMP="Temperature",a.STATE="State",s;var a})(),d=(()=>{return(a=d||(d={})).HUMIDITY="Humidity",a.TEMPERATURE="Temperature",d;var a})(),p=o(3738),_=o(6401),w=o(5917),U=o(1289);const F={unit:"%",name:"Humidity",values:[{date:new Date("2021-09-12T21:46:52.000-05:00"),value:84},{date:new Date("2022-07-27T20:34:11.000-05:00"),value:52.1},{date:new Date("2021-11-18T07:01:29.000-06:00"),value:79},{date:new Date("2021-04-29T07:11:54.000-05:00"),value:73.7},{date:new Date("2021-04-11T08:39:15.000-05:00"),value:77.7},{date:new Date("2021-01-14T21:55:43.000-06:00"),value:104.3},{date:new Date("2022-06-12T11:38:15.000-05:00"),value:88.9},{date:new Date("2021-10-22T23:54:03.000-05:00"),value:66.1},{date:new Date("2021-02-17T18:08:09.000-06:00"),value:59.5},{date:new Date("2022-03-26T04:39:04.000-05:00"),value:76.7},{date:new Date("2022-05-30T13:14:46.000-05:00"),value:14.1},{date:new Date("2021-10-27T11:49:53.000-05:00"),value:56},{date:new Date("2021-01-10T13:27:15.000-06:00"),value:70.9},{date:new Date("2021-03-31T15:25:14.000-05:00"),value:85.8},{date:new Date("2022-05-15T12:19:58.000-05:00"),value:75.5},{date:new Date("2020-11-24T04:47:29.000-06:00"),value:88.6},{date:new Date("2022-07-20T11:30:02.000-05:00"),value:39.6},{date:new Date("2022-03-19T18:25:44.000-05:00"),value:102.6},{date:new Date("2021-08-26T03:10:31.000-05:00"),value:84.9},{date:new Date("2020-11-10T06:57:30.000-06:00"),value:87.5},{date:new Date("2022-02-05T18:37:17.000-06:00"),value:63.3},{date:new Date("2022-06-23T18:35:43.000-05:00"),value:37.1},{date:new Date("2022-05-14T20:47:28.000-05:00"),value:82.3},{date:new Date("2021-04-08T08:23:01.000-05:00"),value:46.7},{date:new Date("2022-09-23T09:39:47.000-05:00"),value:48},{date:new Date("2021-08-05T17:52:06.000-05:00"),value:88},{date:new Date("2022-08-23T02:08:51.000-05:00"),value:58.7},{date:new Date("2021-10-08T17:32:19.000-05:00"),value:107.9},{date:new Date("2021-09-18T00:33:47.000-05:00"),value:72.6},{date:new Date("2021-05-03T06:23:13.000-05:00"),value:82.4},{date:new Date("2022-01-21T02:13:55.000-06:00"),value:101},{date:new Date("2020-12-01T12:00:20.000-06:00"),value:97.4},{date:new Date("2022-09-18T04:33:35.000-05:00"),value:64.7},{date:new Date("2020-12-18T08:20:23.000-06:00"),value:100.1},{date:new Date("2022-04-28T23:58:25.000-05:00"),value:115.5},{date:new Date("2020-11-13T01:10:21.000-06:00"),value:99.7},{date:new Date("2021-10-08T08:18:08.000-05:00"),value:103.6},{date:new Date("2022-02-25T12:24:41.000-06:00"),value:67.9},{date:new Date("2022-09-05T13:06:15.000-05:00"),value:76.9},{date:new Date("2022-04-01T10:35:46.000-05:00"),value:56.6},{date:new Date("2021-10-28T17:38:46.000-05:00"),value:74.1},{date:new Date("2020-12-13T09:10:41.000-06:00"),value:61.7},{date:new Date("2021-09-19T11:54:21.000-05:00"),value:146.2},{date:new Date("2021-09-24T16:20:04.000-05:00"),value:70.2},{date:new Date("2021-05-03T16:57:55.000-05:00"),value:71.9},{date:new Date("2022-08-21T01:11:10.000-05:00"),value:54.7},{date:new Date("2020-12-08T23:48:43.000-06:00"),value:88.2},{date:new Date("2022-07-03T14:05:37.000-05:00"),value:59.1},{date:new Date("2021-08-12T22:37:00.000-05:00"),value:76.1},{date:new Date("2021-10-19T22:01:33.000-05:00"),value:49.8},{date:new Date("2021-05-24T01:12:20.000-05:00"),value:50.1},{date:new Date("2021-04-25T08:39:02.000-05:00"),value:81.7},{date:new Date("2022-06-28T19:21:22.000-05:00"),value:89.5},{date:new Date("2022-06-15T04:13:23.000-05:00"),value:98.6},{date:new Date("2020-11-02T20:56:02.000-06:00"),value:15.5},{date:new Date("2021-08-30T07:25:27.000-05:00"),value:96.1},{date:new Date("2021-03-22T04:57:14.000-05:00"),value:68.6},{date:new Date("2022-06-02T02:47:48.000-05:00"),value:104.8},{date:new Date("2022-09-16T11:21:53.000-05:00"),value:58.3},{date:new Date("2022-04-26T17:34:40.000-05:00"),value:63.2},{date:new Date("2021-05-11T20:42:10.000-05:00"),value:60.6},{date:new Date("2022-07-10T17:03:22.000-05:00"),value:87.5},{date:new Date("2022-05-20T16:19:52.000-05:00"),value:10.4},{date:new Date("2021-09-14T10:18:07.000-05:00"),value:82.1},{date:new Date("2021-12-15T09:29:23.000-06:00"),value:6.9},{date:new Date("2021-06-07T14:53:25.000-05:00"),value:80.9},{date:new Date("2021-08-28T17:46:21.000-05:00"),value:57.5},{date:new Date("2021-09-27T17:42:28.000-05:00"),value:36.5},{date:new Date("2020-11-08T13:12:44.000-06:00"),value:79.2},{date:new Date("2022-05-18T16:47:39.000-05:00"),value:66.5},{date:new Date("2021-12-30T06:39:35.000-06:00"),value:134.1},{date:new Date("2021-02-23T19:05:22.000-06:00"),value:45.8},{date:new Date("2022-01-13T10:24:09.000-06:00"),value:60.4},{date:new Date("2021-01-07T05:13:50.000-06:00"),value:79.4},{date:new Date("2022-09-07T13:18:35.000-05:00"),value:77.9},{date:new Date("2021-08-10T16:21:10.000-05:00"),value:87.7},{date:new Date("2021-03-08T21:38:23.000-06:00"),value:119.9},{date:new Date("2022-04-23T23:03:12.000-05:00"),value:83},{date:new Date("2021-09-16T15:28:42.000-05:00"),value:124.1},{date:new Date("2021-11-22T23:14:45.000-06:00"),value:62.5},{date:new Date("2021-02-02T05:39:24.000-06:00"),value:81.2},{date:new Date("2020-11-17T08:22:21.000-06:00"),value:95.5},{date:new Date("2021-03-22T14:37:56.000-05:00"),value:48.3},{date:new Date("2020-12-14T11:24:46.000-06:00"),value:67.3},{date:new Date("2021-04-04T23:44:13.000-05:00"),value:86.9},{date:new Date("2021-07-15T15:15:57.000-05:00"),value:90.4},{date:new Date("2020-11-04T00:46:16.000-06:00"),value:82.7},{date:new Date("2022-03-19T03:44:54.000-05:00"),value:92.1},{date:new Date("2021-01-26T05:34:41.000-06:00"),value:103.5},{date:new Date("2020-10-31T21:43:03.000-05:00"),value:71.4},{date:new Date("2021-08-03T09:45:11.000-05:00"),value:98},{date:new Date("2022-01-21T17:34:15.000-06:00"),value:76.6},{date:new Date("2021-07-12T04:55:09.000-05:00"),value:55.9},{date:new Date("2022-07-28T17:41:35.000-05:00"),value:101.1},{date:new Date("2020-10-19T18:58:50.000-05:00"),value:109.1},{date:new Date("2022-10-18T14:52:46.000-05:00"),value:39.2},{date:new Date("2022-06-16T10:29:08.000-05:00"),value:53},{date:new Date("2021-07-17T01:23:29.000-05:00"),value:59.4},{date:new Date("2021-02-28T15:36:30.000-06:00"),value:82.8},{date:new Date("2020-12-26T15:51:33.000-06:00"),value:46.7}]},J={unit:"F",name:"Temperature",values:[{date:new Date("2021-11-08T04:11:32.000-06:00"),value:89.1},{date:new Date("2021-05-05T20:52:20.000-05:00"),value:80},{date:new Date("2021-12-11T09:28:43.000-06:00"),value:58.1},{date:new Date("2021-12-31T04:12:42.000-06:00"),value:93.8},{date:new Date("2021-06-27T21:23:09.000-05:00"),value:107.8},{date:new Date("2022-06-27T11:55:22.000-05:00"),value:59.2},{date:new Date("2022-09-15T08:44:46.000-05:00"),value:84.3},{date:new Date("2021-08-01T02:40:02.000-05:00"),value:93},{date:new Date("2021-06-30T06:15:45.000-05:00"),value:77.8},{date:new Date("2021-08-27T23:15:38.000-05:00"),value:84.7},{date:new Date("2021-02-07T20:38:12.000-06:00"),value:124.6},{date:new Date("2022-07-14T23:23:22.000-05:00"),value:71.6},{date:new Date("2021-04-11T10:58:15.000-05:00"),value:48.4},{date:new Date("2022-01-04T23:04:20.000-06:00"),value:104.8},{date:new Date("2021-03-05T09:57:30.000-06:00"),value:100.6},{date:new Date("2021-06-13T15:51:21.000-05:00"),value:77.3},{date:new Date("2020-12-02T19:49:38.000-06:00"),value:95.1},{date:new Date("2021-08-19T07:55:51.000-05:00"),value:110.3},{date:new Date("2020-12-05T05:20:58.000-06:00"),value:96},{date:new Date("2020-12-31T07:13:36.000-06:00"),value:97.3},{date:new Date("2021-01-10T21:18:33.000-06:00"),value:100.5},{date:new Date("2021-11-11T22:56:25.000-06:00"),value:98.1},{date:new Date("2022-06-15T07:30:16.000-05:00"),value:59.3},{date:new Date("2022-03-19T17:26:20.000-05:00"),value:89.3},{date:new Date("2022-04-03T21:26:02.000-05:00"),value:120.1},{date:new Date("2021-10-03T23:34:51.000-05:00"),value:106.1},{date:new Date("2022-10-09T19:09:06.000-05:00"),value:51.2},{date:new Date("2022-03-13T19:22:27.000-05:00"),value:101},{date:new Date("2020-12-29T21:26:53.000-06:00"),value:61.5},{date:new Date("2020-11-06T21:56:43.000-06:00"),value:81.6},{date:new Date("2022-01-12T23:21:16.000-06:00"),value:43.1},{date:new Date("2021-04-06T11:59:33.000-05:00"),value:80.7},{date:new Date("2021-06-21T09:59:13.000-05:00"),value:105.7},{date:new Date("2022-05-15T19:32:29.000-05:00"),value:92.2},{date:new Date("2022-08-23T06:28:13.000-05:00"),value:76.1},{date:new Date("2021-07-09T03:18:57.000-05:00"),value:63.2},{date:new Date("2022-07-28T06:49:35.000-05:00"),value:86.7},{date:new Date("2021-03-31T04:44:30.000-05:00"),value:23.4},{date:new Date("2022-06-30T12:10:43.000-05:00"),value:97.2},{date:new Date("2021-06-11T18:38:43.000-05:00"),value:113.3},{date:new Date("2020-12-22T11:31:49.000-06:00"),value:109.2},{date:new Date("2021-04-15T11:11:23.000-05:00"),value:117.1},{date:new Date("2021-12-28T11:11:34.000-06:00"),value:78.8},{date:new Date("2021-12-25T14:31:13.000-06:00"),value:92.9},{date:new Date("2021-05-14T15:27:29.000-05:00"),value:35.4},{date:new Date("2021-06-16T07:44:36.000-05:00"),value:47.4},{date:new Date("2022-06-02T03:45:41.000-05:00"),value:67.8},{date:new Date("2021-11-22T03:48:36.000-06:00"),value:29.1},{date:new Date("2022-02-09T22:08:13.000-06:00"),value:80.5},{date:new Date("2022-09-29T08:50:11.000-05:00"),value:90.5},{date:new Date("2021-11-18T17:16:49.000-06:00"),value:92.3},{date:new Date("2022-03-19T04:12:37.000-05:00"),value:81.9},{date:new Date("2022-02-02T00:54:43.000-06:00"),value:92.7},{date:new Date("2021-07-03T18:26:12.000-05:00"),value:41.1},{date:new Date("2022-08-09T06:51:03.000-05:00"),value:79.7},{date:new Date("2022-03-16T10:30:49.000-05:00"),value:59.5},{date:new Date("2021-04-26T09:28:21.000-05:00"),value:65.8},{date:new Date("2021-07-19T17:36:39.000-05:00"),value:68.4},{date:new Date("2022-03-11T02:27:12.000-06:00"),value:41.9},{date:new Date("2021-06-02T21:33:28.000-05:00"),value:104.9},{date:new Date("2020-10-29T04:42:02.000-05:00"),value:96.8},{date:new Date("2022-04-11T03:15:56.000-05:00"),value:98.7},{date:new Date("2021-07-17T01:17:24.000-05:00"),value:112.1},{date:new Date("2021-03-02T12:28:40.000-06:00"),value:95.1},{date:new Date("2021-06-06T19:01:13.000-05:00"),value:65.7},{date:new Date("2022-05-17T12:01:51.000-05:00"),value:87.3},{date:new Date("2021-01-15T09:12:13.000-06:00"),value:94.1},{date:new Date("2020-11-02T21:17:28.000-06:00"),value:23.9},{date:new Date("2021-06-27T16:19:13.000-05:00"),value:43.2},{date:new Date("2021-08-19T12:31:32.000-05:00"),value:69.1},{date:new Date("2021-03-30T01:06:47.000-05:00"),value:69.7},{date:new Date("2021-02-04T18:06:07.000-06:00"),value:85.9},{date:new Date("2021-05-14T00:13:43.000-05:00"),value:87.2},{date:new Date("2022-06-17T20:55:11.000-05:00"),value:90.1},{date:new Date("2022-10-03T17:11:26.000-05:00"),value:89.1},{date:new Date("2022-07-08T16:42:30.000-05:00"),value:92.2},{date:new Date("2022-06-26T05:47:52.000-05:00"),value:76.5},{date:new Date("2022-07-31T04:04:05.000-05:00"),value:35.3},{date:new Date("2022-05-30T05:10:28.000-05:00"),value:96.7},{date:new Date("2021-07-30T17:12:03.000-05:00"),value:85.6},{date:new Date("2021-10-20T09:41:15.000-05:00"),value:85},{date:new Date("2021-07-14T18:34:34.000-05:00"),value:76.5},{date:new Date("2022-02-18T12:11:47.000-06:00"),value:60.7},{date:new Date("2021-12-15T06:57:08.000-06:00"),value:88.8},{date:new Date("2022-02-28T03:01:02.000-06:00"),value:44.1},{date:new Date("2021-01-24T06:16:10.000-06:00"),value:115.5},{date:new Date("2021-09-16T11:10:00.000-05:00"),value:31.3},{date:new Date("2021-10-23T18:11:36.000-05:00"),value:70.4},{date:new Date("2021-10-06T04:48:34.000-05:00"),value:113.3},{date:new Date("2020-12-01T21:09:12.000-06:00"),value:56.3},{date:new Date("2022-01-01T09:38:58.000-06:00"),value:64.7},{date:new Date("2022-08-05T19:18:44.000-05:00"),value:109.2},{date:new Date("2021-01-13T02:13:51.000-06:00"),value:85.7},{date:new Date("2022-03-18T17:10:38.000-05:00"),value:127.9},{date:new Date("2021-12-19T07:49:03.000-06:00"),value:112.1},{date:new Date("2022-09-15T14:48:43.000-05:00"),value:78},{date:new Date("2021-10-16T12:23:45.000-05:00"),value:47.9},{date:new Date("2021-12-04T23:15:20.000-06:00"),value:62.1},{date:new Date("2021-06-28T08:38:41.000-05:00"),value:67.5},{date:new Date("2021-12-08T04:34:16.000-06:00"),value:126.4}]},A=(a,n)=>{let e=[];const i=a.slice();for(let r=0;r<n;r++){const u=Math.ceil(10*Math.random())%i.length;e.push(i.splice(u,1)[0])}return e};let B=(()=>{class a{constructor(){}getChartData(e,i){switch(i){case d.HUMIDITY:return this.getHumidityChartData(e);case d.TEMPERATURE:return this.getTemperatureChartData(e)}}getHumidityChartData(e){return a.getHumidityChartDemoData(e)}getTemperatureChartData(e){return a.getTemperatureChartDemoData(e)}static getHumidityChartDemoData(e){return(0,w.of)((a=>{console.log("DEMO > Fetching humidity demo data for unit",a);const n=F;return n.values=A(n.values.sort((e,i)=>e.date.getDate()-i.date.getDate()),20),n})(e)).pipe((0,U.g)(150))}static getTemperatureChartDemoData(e){return(0,w.of)((a=>{console.log("DEMO > Fetching demo temperature data for unit",a);const n=J;return n.values=A(n.values.sort((e,i)=>e.date.getDate()-i.date.getDate()),20),n})(e)).pipe((0,U.g)(150))}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var M=o(8590),I=o(1552);function X(a,n){if(1&a&&t._uU(0),2&a){const e=n.model,i=t.oxw();t.AsE(" ",e[0].value,"",i.measurementUnit," ")}}let S=(()=>{class a{constructor(e){this.sensorsService=e,this.chartData=[],this.data=new v.X(null),this.data.pipe((0,h.h)(i=>!!i)).subscribe(i=>this.parseData(i))}set type(e){e&&(this._type=e,this.applyChartScheme(e),this.fetchData())}set unit(e){e&&(this._unit=e,this.fetchData())}get title(){return this._type.toString().toLowerCase()}ngOnInit(){}getTooltipText(e){return`${"max"===e?"Maximum":"Minimum"} ${this.title}`}fetchData(){!this._unit||!this._type||this.sensorsService.getChartData(this._unit,this._type).subscribe(this.data)}parseData(e){const i=Math.min.apply(null,e.values.map(u=>u.value)),r=Math.max.apply(null,e.values.map(u=>u.value));this.measurementUnit=e.unit,this.minValue=`${i}${e.unit}`,this.maxValue=`${r}${e.unit}`,this.chartData=[{name:e.name,series:[...e.values.map(u=>({value:`${u.value}`,name:u.date.toDateString()}))]}]}applyChartScheme(e){switch(e){case d.TEMPERATURE:this.chartScheme=_.G5.find(i=>"neons"===i.name);break;case d.HUMIDITY:this.chartScheme=_.G5.find(i=>"horizon"===i.name)}}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(B))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-unit-chart"]],inputs:{type:"type",unit:"unit"},decls:19,vars:14,consts:[[1,"chart-meta"],[1,"chart-title"],[1,"chart-wrapper"],[3,"results","autoScale","scheme"],["seriesTooltipTemplate",""],[1,"chart-details"],["matTooltipPosition","below",1,"chart-measurement",3,"matTooltip"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"ngx-charts-line-chart",3),t.YNc(6,X,1,2,"ng-template",null,4,t.W1O),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.TgZ(9,"div",6),t.ALo(10,"titlecase"),t.TgZ(11,"mat-icon"),t._uU(12,"arrow_drop_up"),t.qZA(),t._uU(13),t.qZA(),t.TgZ(14,"div",6),t.ALo(15,"titlecase"),t.TgZ(16,"mat-icon"),t._uU(17,"arrow_drop_down"),t.qZA(),t._uU(18),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Oqu(t.lcZ(3,8,i.title)),t.xp6(3),t.Q6J("results",i.chartData)("autoScale",!0)("scheme",i.chartScheme),t.xp6(4),t.Q6J("matTooltip",t.lcZ(10,10,i.getTooltipText("max"))),t.xp6(4),t.hij("",i.maxValue," "),t.xp6(1),t.Q6J("matTooltip",t.lcZ(15,12,i.getTooltipText("min"))),t.xp6(4),t.hij("",i.minValue," "))},directives:[_.Dw,M.gM,I.Hw],pipes:[l.rS],styles:["[_nghost-%COMP%]{flex:1;background-color:#b39ddb33;border-radius:8px;display:flex;padding:0;overflow:hidden;flex-direction:column}.chart-meta[_ngcontent-%COMP%]{padding-top:10px;padding-left:10px}.chart-meta[_ngcontent-%COMP%]   .chart-title[_ngcontent-%COMP%]{color:gray}.chart-wrapper[_ngcontent-%COMP%]{flex:1;max-height:calc(100% - 60px)}.chart-details[_ngcontent-%COMP%]{padding:1px 10px 10px;display:flex;justify-content:space-between}.chart-measurement[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;color:gray}*[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}"]}),a})();var $=o(2298),y=o(8002),g=o(687),P=o(2458),c=o(5922);const b="adjust",H="water";class f{static getUnitStateIcon(n){switch(n){case c.H.ALARM:return"notifications";case c.H.LOCKED:return"lock";case c.H.UNLOCKED:return"no_encryption"}}static getUnitStateColor(n){switch(n){case c.H.ALARM:return"red";case c.H.LOCKED:return"green";case c.H.UNLOCKED:return"blue"}}static getUnitStateText(n){switch(n){case c.H.ALARM:return"Alarm";case c.H.LOCKED:return"Locked";case c.H.UNLOCKED:return"Unlocked"}}static getDoorStateIcon(n){switch(n){case g.A.CLOSED:return"door_front";case g.A.OPEN:return"meeting_room"}}static getDoorStateText(n){switch(n){case g.A.CLOSED:return"Closed";case g.A.OPEN:return"Open"}}static getDoorStateColor(n){switch(n){case g.A.CLOSED:return"red";case g.A.OPEN:return"green"}}static getTemperatureColor(n){return n>=90?"red":n<=32?"blue":"green"}static getHumidityColor(n){return n>=90?"red":"green"}static getDoorStateData(n){return{icon:this.getDoorStateIcon(n),text:this.getDoorStateText(n),iconColor:this.getDoorStateColor(n)}}static getUnitStateData(n){let e;return n===c.H.ALARM&&(e={icon:"error_outline",text:"An alarm has been tripped"}),{icon:this.getUnitStateIcon(n),text:this.getUnitStateText(n),iconColor:this.getUnitStateColor(n),badge:e}}static getTemperatureData(n){let e;return n>95?e={icon:b,text:"The temperature is above the specified threshold"}:n<31&&(e={icon:b,text:"The temperature is below the specified threshold"}),{icon:"thermostat",text:`${n} F`,iconColor:this.getTemperatureColor(n),badge:e}}static getHumidityData(n){let e;return n>95&&(e={icon:H,text:"The humidity level is above the specified threshold"}),{icon:H,text:`${n}%`,iconColor:this.getHumidityColor(n),badge:e}}}var at=o(346);function nt(a,n){if(1&a&&(t.TgZ(0,"mat-icon"),t._uU(1),t.qZA()),2&a){const e=t.oxw(2);t.Akn(e.iconColorStyle),t.xp6(1),t.Oqu(e.icon)}}function it(a,n){1&a&&t._UZ(0,"mat-spinner",10)}function ot(a,n){if(1&a&&(t.YNc(0,nt,2,3,"mat-icon",8),t.ALo(1,"async"),t.YNc(2,it,1,0,"ng-template",null,9,t.W1O)),2&a){const e=t.MAs(3),i=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,i.hasLoaded))("ngIfElse",e)}}function rt(a,n){}function st(a,n){if(1&a&&(t.TgZ(0,"div",11),t.YNc(1,rt,0,0,"ng-template",12),t.qZA()),2&a){const e=t.oxw(),i=t.MAs(1);t.Q6J("matBadge",e.badge.icon)("matTooltip",e.badge.text),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}function lt(a,n){}function ct(a,n){if(1&a&&(t.TgZ(0,"div",13),t.YNc(1,lt,0,0,"ng-template",12),t.qZA()),2&a){t.oxw();const e=t.MAs(1);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function ut(a,n){if(1&a&&(t.TgZ(0,"span",14),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(e.text)}}function dt(a,n){1&a&&t._UZ(0,"mat-spinner",10)}let E=(()=>{class a{constructor(){this.indicatorClicked=e=>{this.clickable&&(this.ripple.launch(e.x,e.y),this.updateUnitData())},this.clickable=!1,this.updated=new t.vpe(!0),this.data=new $.t,this.hasLoaded=new v.X(!1)}set unitData(e){e&&this.data.next(e)}set type(e){this._indicatorType=e,this.title=e.toString().toLowerCase()}ngOnInit(){this.data.pipe((0,h.h)(e=>!!e),(0,x.b)(e=>this._currentData=e),(0,y.U)(e=>{switch(this._indicatorType){case s.DOOR:return this.clickable=!0,f.getDoorStateData(e.doorState);case s.HUMIDITY:return f.getHumidityData(e.lastHumidity);case s.TEMP:return f.getTemperatureData(e.lastTemperature);case s.STATE:return this.clickable=!0,f.getUnitStateData(e.state)}})).subscribe(e=>{this.icon=e.icon,this.iconColorStyle=`color: ${(a=>{switch(a){case"green":return"#76ff03";case"red":return"#ff1744";case"blue":return"#2962ff";default:return"#000"}})(e.iconColor)};`,this.text=e.text,this.badge=e.badge,this.hasLoaded.next(!0)})}dataHasBadge(e){return!!e.badge&&e.badge.hasOwnProperty("icon")}updateUnitData(){switch(this._indicatorType){case s.DOOR:this.updateDoorState();break;case s.STATE:this.updateState()}this.data.next(this._currentData),this.updated.emit(this._currentData)}updateDoorState(){this._currentData.doorState=this._currentData.doorState===g.A.OPEN?g.A.CLOSED:g.A.OPEN}updateState(){switch(this._currentData.state){case c.H.UNLOCKED:case c.H.ALARM:this._currentData.state=c.H.LOCKED;break;case c.H.LOCKED:this._currentData.state=c.H.UNLOCKED}}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-unit-indicator"]],viewQuery:function(e,i){if(1&e&&t.Gf(P.wG,5),2&e){let r;t.iGM(r=t.CRH())&&(i.ripple=r.first)}},hostVars:2,hostBindings:function(e,i){1&e&&t.NdJ("click",function(u){return i.indicatorClicked(u)}),2&e&&t.ekj("clickable",i.clickable)},inputs:{unitData:"unitData",type:"type"},outputs:{updated:"updated"},decls:13,vars:9,consts:[["iconWrapper",""],["class","icon-wrapper has-badge","matBadgeOverlap","true","matBadgeSize","small","matTooltipPosition","after",3,"matBadge","matTooltip",4,"ngIf"],["class","icon-wrapper no-badge",4,"ngIf"],[1,"indicator-text"],[1,"indicator-title"],["class","indicator-value",4,"ngIf","ngIfElse"],["textLoading",""],["matRipple","",1,"ripple-wrapper"],[3,"style",4,"ngIf","ngIfElse"],["iconLoading",""],["diameter","18"],["matBadgeOverlap","true","matBadgeSize","small","matTooltipPosition","after",1,"icon-wrapper","has-badge",3,"matBadge","matTooltip"],[3,"ngTemplateOutlet"],[1,"icon-wrapper","no-badge"],[1,"indicator-value"]],template:function(e,i){if(1&e&&(t.YNc(0,ot,4,4,"ng-template",null,0,t.W1O),t.YNc(2,st,2,3,"div",1),t.YNc(3,ct,2,1,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"span",4),t._uU(6),t.ALo(7,"titlecase"),t.qZA(),t.YNc(8,ut,2,1,"span",5),t.ALo(9,"async"),t.YNc(10,dt,1,0,"ng-template",null,6,t.W1O),t.qZA(),t._UZ(12,"div",7)),2&e){const r=t.MAs(11);t.xp6(2),t.Q6J("ngIf",i.badge),t.xp6(1),t.Q6J("ngIf",!i.badge),t.xp6(3),t.Oqu(t.lcZ(7,5,i.title)),t.xp6(2),t.Q6J("ngIf",t.lcZ(9,7,i.hasLoaded))("ngIfElse",r)}},directives:[l.O5,P.wG,I.Hw,Z.$g,at.k,M.gM,l.tP],pipes:[l.rS,l.Ov],styles:['[_nghost-%COMP%]{background-color:#b39ddb33;border-radius:8px;display:flex;justify-content:space-between;align-items:center;padding:0 12px;flex:1}.clickable[_nghost-%COMP%]{cursor:pointer}.icon-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:.4rem;background:white;border-radius:8px;margin-right:8px;margin-left:-2px}.icon-wrapper.has-badge[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{font-family:"Material Icons",emoji;background-color:red;font-size:13px;line-height:17px;pointer-events:none}.indicator-text[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-between;align-items:center}.indicator-text[_ngcontent-%COMP%]   .indicator-title[_ngcontent-%COMP%]{color:#9575cde6}.indicator-text[_ngcontent-%COMP%]   .indicator-value[_ngcontent-%COMP%]{font-weight:500;font-size:1rem}.ripple-wrapper[_ngcontent-%COMP%]{pointer-events:none;position:absolute;top:0;bottom:0;left:0;right:0}*[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}']}),a})();function pt(a,n){if(1&a&&(t.TgZ(0,"mat-grid-tile",4),t._UZ(1,"app-unit-chart",5),t.qZA()),2&a){const e=n.$implicit,i=t.oxw();t.xp6(1),t.Q6J("type",e)("unit",i.unit)}}function mt(a,n){if(1&a&&(t.TgZ(0,"mat-grid-tile",6),t._UZ(1,"app-unit-indicator",7),t.ALo(2,"async"),t.qZA()),2&a){const e=n.$implicit,i=t.oxw();t.xp6(1),t.Q6J("type",e)("unitData",t.lcZ(2,2,i.unitData))}}let gt=(()=>{class a{constructor(e){this.unitsService=e,this.unitIndicators=[s.HUMIDITY,s.TEMP,s.STATE,s.DOOR],this.unitCharts=[d.HUMIDITY,d.TEMPERATURE],this._unitData=new v.X(null),this.unitData=this._unitData.pipe((0,h.h)(i=>!!i))}set unit(e){e&&(this._unit=e,this.unitsService.getUnitData(e).subscribe(this._unitData))}get unit(){return this._unit}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(D.X))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-unit-preview"]],inputs:{unit:"unit"},decls:10,vars:4,consts:[[1,"mat-elevation-z0","unit-card"],["cols","2","rowHeight","60px","gutterSize","5px"],["class","chart-tile","rowspan","4",4,"ngFor","ngForOf"],["class","unit-indicator-tile",4,"ngFor","ngForOf"],["rowspan","4",1,"chart-tile"],[3,"type","unit"],[1,"unit-indicator-tile"],[3,"type","unitData"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0),t.TgZ(1,"mat-card-header"),t.TgZ(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"mat-card-content"),t.TgZ(7,"mat-grid-list",1),t.YNc(8,pt,2,2,"mat-grid-tile",2),t.YNc(9,mt,3,4,"mat-grid-tile",3),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",i.unit.name," "),t.xp6(2),t.hij(" ",i.unit.location," "),t.xp6(3),t.Q6J("ngForOf",i.unitCharts),t.xp6(1),t.Q6J("ngForOf",i.unitIndicators))},directives:[p.a8,p.dk,p.n5,p.$j,p.dn,T.Il,l.sg,T.DX,S,E],pipes:[l.Ov],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.mat-card[_ngcontent-%COMP%]{flex:1;border-radius:8px;padding:.8em}.unit-card[_ngcontent-%COMP%]  .mat-card-header-text{margin-left:5px;margin-top:8px}.unit-card[_ngcontent-%COMP%]  .mat-card-header-text mat-card-subtitle{margin-bottom:8px}*[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}"]}),a})();function Tt(a,n){1&a&&t._UZ(0,"app-loading-shade")}function vt(a,n){if(1&a&&(t.TgZ(0,"mat-grid-tile",5),t._UZ(1,"app-unit-preview",6),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Q6J("unit",e)}}let Dt=(()=>{class a{constructor(e){this.unitsService=e,this.isLoading=new v.X(!0),this.units=this.unitsService.getUnits().pipe((0,x.b)(()=>this.isLoading.next(!1)))}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(D.X))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-units-grid"]],decls:7,vars:6,consts:[[1,"units-grid-inner"],[4,"ngIf"],[1,"grid-list-wrapper"],["cols","2","gutterSize","15px"],["class","unit-tile",4,"ngFor","ngForOf"],[1,"unit-tile"],[3,"unit"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Tt,1,0,"app-loading-shade",1),t.ALo(2,"async"),t.TgZ(3,"div",2),t.TgZ(4,"mat-grid-list",3),t.YNc(5,vt,2,1,"mat-grid-tile",4),t.ALo(6,"async"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,i.isLoading)),t.xp6(4),t.Q6J("ngForOf",t.lcZ(6,4,i.units)))},directives:[l.O5,T.Il,l.sg,Q,T.DX,gt],pipes:[l.Ov],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.units-grid-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.6em;font-weight:500}.unit-tile[_ngcontent-%COMP%]  .mat-grid-tile-content{flex-direction:column;justify-content:unset!important;align-items:unset!important}.grid-list-wrapper[_ngcontent-%COMP%]{margin-top:1em}"]}),a})();var ht=o(6682),wt=o(9761),L=o(3190),ft=o(5304),N=o(1494),Y=o(7082),m=o(2789);function Ct(a,n){1&a&&(t.TgZ(0,"th",10),t._uU(1,"Credential"),t.qZA())}function xt(a,n){if(1&a&&(t.TgZ(0,"td",11),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.credential)}}function _t(a,n){1&a&&(t.TgZ(0,"th",10),t._uU(1,"Accessed At"),t.qZA())}function yt(a,n){if(1&a&&(t.TgZ(0,"td",11),t._uU(1),t.ALo(2,"date"),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.date))}}function Ot(a,n){1&a&&(t.TgZ(0,"th",10),t._uU(1,"Unit"),t.qZA())}function Zt(a,n){if(1&a&&(t.TgZ(0,"td",11),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.xp6(1),t.Oqu(e.unitName)}}function Ut(a,n){1&a&&t._UZ(0,"tr",12)}function At(a,n){1&a&&t._UZ(0,"tr",13)}let Mt=(()=>{class a{constructor(e){this.unitsService=e,this.isLoading=!0,this.displayedColumns=["credential","date","unit"],this.accessHistoryData=[],this.total=0}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,ht.T)(this.sort.sortChange,this.paginator.page).pipe((0,wt.O)({}),(0,L.w)(()=>(this.isLoading=!0,this.unitsService.getUnitAccessHistory().pipe((0,ft.K)(()=>(0,w.of)([]))))),(0,y.U)(e=>(this.isLoading=!1,null===e?[]:(this.total=e.length,e)))).subscribe(e=>this.accessHistoryData=e)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(D.X))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-access-history"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Y.NW,5),t.Gf(N.YE,5)),2&e){let r;t.iGM(r=t.CRH())&&(i.paginator=r.first),t.iGM(r=t.CRH())&&(i.sort=r.first)}},inputs:{unit:"unit"},decls:14,vars:5,consts:[[1,"access-table-container"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"access-table",3,"dataSource"],["matColumnDef","credential"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","unit"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"table",1),t.ynx(2,2),t.YNc(3,Ct,2,0,"th",3),t.YNc(4,xt,2,1,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,_t,2,0,"th",3),t.YNc(7,yt,3,3,"td",4),t.BQk(),t.ynx(8,6),t.YNc(9,Ot,2,0,"th",3),t.YNc(10,Zt,2,1,"td",4),t.BQk(),t.YNc(11,Ut,1,0,"tr",7),t.YNc(12,At,1,0,"tr",8),t.qZA(),t.qZA(),t._UZ(13,"mat-paginator",9)),2&e&&(t.xp6(1),t.Q6J("dataSource",i.accessHistoryData),t.xp6(10),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("length",i.total)("pageSize",30))},directives:[m.BZ,N.YE,m.w1,m.fO,m.Dz,m.as,m.nj,Y.NW,m.ge,m.ev,m.XQ,m.Gk],pipes:[l.uU],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;border-radius:8px;overflow:hidden}.access-table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),a})(),It=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-client-dashboard"]],decls:12,vars:0,consts:[[1,"section"],[1,"section-title"],[1,"section-content"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"span"),t._uU(3,"Units"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t._UZ(5,"app-units-grid"),t.qZA(),t.qZA(),t.TgZ(6,"div",0),t.TgZ(7,"div",1),t.TgZ(8,"span"),t._uU(9,"Access History"),t.qZA(),t.qZA(),t.TgZ(10,"div",2),t._UZ(11,"app-access-history"),t.qZA(),t.qZA())},directives:[Dt,Mt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;padding:2.5em;flex:1}.section[_ngcontent-%COMP%]{margin-top:1.5em}.section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin-bottom:1em}.section[_ngcontent-%COMP%]:first-child{margin-top:0!important}.section[_ngcontent-%COMP%]:first-child   .section-title[_ngcontent-%COMP%]{margin-bottom:0!important}"]}),a})();var C=o(4655),St=o(2271);function Pt(a,n){if(1&a&&(t.TgZ(0,"mat-grid-tile",6),t._UZ(1,"app-unit-chart",7),t.qZA()),2&a){const e=n.$implicit,i=t.oxw().ngIf;t.xp6(1),t.Q6J("type",e)("unit",i)}}function bt(a,n){if(1&a&&(t.TgZ(0,"mat-grid-tile",8),t._UZ(1,"app-unit-indicator",9),t.ALo(2,"async"),t.qZA()),2&a){const e=n.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("type",e)("unitData",t.lcZ(2,2,i.unitData))}}function Ht(a,n){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-card",1),t.TgZ(2,"mat-card-header"),t.TgZ(3,"mat-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"mat-card-content",2),t.TgZ(8,"mat-grid-list",3),t.YNc(9,Pt,2,2,"mat-grid-tile",4),t.YNc(10,bt,3,4,"mat-grid-tile",5),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&a){const e=n.ngIf,i=t.oxw();t.xp6(4),t.hij(" ",e.name," "),t.xp6(2),t.hij(" ",e.location," "),t.xp6(3),t.Q6J("ngForOf",i.unitCharts),t.xp6(1),t.Q6J("ngForOf",i.unitIndicators)}}let Et=(()=>{class a{constructor(e,i){this.activatedRoute=e,this.unitsService=i,this.unitIndicators=[s.HUMIDITY,s.TEMP,s.STATE,s.DOOR],this.unitCharts=[d.HUMIDITY,d.TEMPERATURE],this._unitData=new v.X(null),this.unit=this.activatedRoute.data.pipe((0,y.U)(r=>r.unit),(0,x.b)(r=>this.unitsService.getUnitData(r).subscribe(this._unitData))),this.unitData=this._unitData.pipe((0,h.h)(r=>!!r))}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(C.gz),t.Y36(D.X))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-client-unit"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"mat-elevation-z0","unit-card"],[1,"unit-content"],["cols","2","rowHeight","150px","gutterSize","10px"],["class","chart-tile","rowspan","3",4,"ngFor","ngForOf"],["class","unit-indicator-tile",4,"ngFor","ngForOf"],["rowspan","3",1,"chart-tile"],[3,"type","unit"],[1,"unit-indicator-tile"],[3,"type","unitData"]],template:function(e,i){1&e&&(t.YNc(0,Ht,11,4,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,i.unit))},directives:[l.O5,p.a8,p.dk,p.n5,p.$j,p.dn,T.Il,l.sg,T.DX,S,E],pipes:[l.Ov],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.unit-content[_ngcontent-%COMP%]{padding:15px}.unit-content[_ngcontent-%COMP%]   .unit-indicator-tile[_ngcontent-%COMP%]     .mat-grid-tile-content{justify-content:unset!important;align-items:unset!important}"]}),a})();var R=o(4402);const Lt=[{path:"dashboard",component:It},{path:"unit/:id",component:Et,resolve:{unit:(()=>{class a{constructor(e,i){this.unitsService=e,this.router=i}resolve(e,i){const r=Number(e.paramMap.get("id"));return isNaN(r)?(0,R.D)(this.router.navigate(["client","dashboard"])):this.unitsService.getUnit(r).pipe((0,L.w)(u=>u?(0,w.of)(u):(0,R.D)(this.router.navigate(["client","dashboard"]))))}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(D.X),t.LFG(C.F0))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}];let Nt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[l.ez,C.Bz.forChild(Lt),St.m,p.QW,T.N6],C.Bz]}),a})()}}]);