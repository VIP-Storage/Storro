"use strict";(self.webpackChunkstorro=self.webpackChunkstorro||[]).push([[845],{2845:(Et,y,a)=>{a.r(y),a.d(y,{ClientPagesModule:()=>Lt});var d=a(8583),t=a(7716),C=a(6215),T=a(3342),p=a(5917),r=(()=>{return(n=r||(r={}))[n.OPEN=0]="OPEN",n[n.CLOSED=1]="CLOSED",r;var n})(),s=(()=>{return(n=s||(s={}))[n.UNLOCKED=0]="UNLOCKED",n[n.LOCKED=1]="LOCKED",n[n.ALARM=3]="ALARM",s;var n})();const S=[{name:"Demo Unit 1",location:"Your Mom's House",id:0},{name:"Demo Unit 2",location:"Your Mom's Mom's House",id:1},{name:"Demo Unit 3",location:"Hell",id:2},{name:"Demo Unit 4",location:"Comcast World Headquarters",id:3}],E=[{lastAccessed:new Date,lastHumidity:78.5,lastTemperature:69,doorState:r.OPEN,state:s.ALARM,unitID:0},{lastAccessed:new Date,lastHumidity:78.5,lastTemperature:55,doorState:r.CLOSED,state:s.LOCKED,unitID:1},{lastAccessed:new Date,lastHumidity:0,lastTemperature:102,doorState:r.OPEN,state:s.UNLOCKED,unitID:2},{lastAccessed:new Date,lastHumidity:42.7,lastTemperature:88.2,doorState:r.CLOSED,state:s.LOCKED,unitID:3}],U=[{unitID:0,credential:"Bob",date:new Date},{unitID:0,credential:"Bill",date:new Date},{unitID:2,credential:"Justin",date:new Date},{unitID:3,credential:"Dustin",date:new Date},{unitID:1,credential:"Bustin",date:new Date}],v=()=>S;var B=a(3637),R=a(7393),A=a(3098);function g(n,i=B.P){const o=function(n){return n instanceof Date&&!isNaN(+n)}(n)?+n-i.now():Math.abs(n);return c=>c.lift(new J(o,i))}class J{constructor(i,e){this.delay=i,this.scheduler=e}call(i,e){return e.subscribe(new D(i,this.delay,this.scheduler))}}class D extends R.L{constructor(i,e,o){super(i),this.delay=e,this.scheduler=o,this.queue=[],this.active=!1,this.errored=!1}static dispatch(i){const e=i.source,o=e.queue,c=i.scheduler,x=i.destination;for(;o.length>0&&o[0].time-c.now()<=0;)o.shift().notification.observe(x);if(o.length>0){const St=Math.max(0,o[0].time-c.now());this.schedule(i,St)}else this.unsubscribe(),e.active=!1}_schedule(i){this.active=!0,this.destination.add(i.schedule(D.dispatch,this.delay,{source:this,destination:this.destination,scheduler:i}))}scheduleNotification(i){if(!0===this.errored)return;const e=this.scheduler,o=new q(e.now()+this.delay,i);this.queue.push(o),!1===this.active&&this._schedule(e)}_next(i){this.scheduleNotification(A.P.createNext(i))}_error(i){this.errored=!0,this.queue=[],this.destination.error(i),this.unsubscribe()}_complete(){this.scheduleNotification(A.P.createComplete()),this.unsubscribe()}}class q{constructor(i,e){this.time=i,this.notification=e}}let O=(()=>{class n{constructor(){}getUnits(){return n.getDemoUnits()}getUnit(e){return n.getDemoUnit(e)}getUnitData(e){return n.getDemoUnitData(e)}getUnitAccessHistory(e){return n.getDemoUnitAccessHistory(e)}static getDemoUnits(){return(0,p.of)(v()).pipe(g(150))}static getDemoUnit(e){return(0,p.of)(v().find(o=>o.id===e)).pipe(g(150))}static getDemoUnitData(e){return(0,p.of)((n=>E.find(i=>i.unitID===n.id))(e)).pipe(g(150))}static getDemoUnitAccessHistory(e){return(0,p.of)((n=>{const i=[];return n?i.push(...U.filter(e=>e.unitID===n.id)):i.push(...U),i})(e)).pipe(g(150))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var h=a(4929),Z=a(4885);let F=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-loading-shade"]],decls:1,vars:0,consts:[["diameter","22"]],template:function(e,o){1&e&&t._UZ(0,"mat-spinner",0)},directives:[Z.$g],styles:["[_nghost-%COMP%]{display:flex;position:absolute;top:0;bottom:0;left:0;right:0;justify-content:center;align-items:center}"]}),n})();var I=a(5435),l=(()=>{return(n=l||(l={})).DOOR="Door",n.HUMIDITY="Humidity",n.TEMP="Temperature",n.STATE="State",l;var n})(),m=a(3738),G=a(2298),_=a(8002),M=a(2458);const b="adjust",w="water";class f{static getUnitStateIcon(i){switch(i){case s.ALARM:return"notifications";case s.LOCKED:return"lock";case s.UNLOCKED:return"no_encryption"}}static getUnitStateColor(i){switch(i){case s.ALARM:return"red";case s.LOCKED:return"green";case s.UNLOCKED:return"blue"}}static getUnitStateText(i){switch(i){case s.ALARM:return"Alarm";case s.LOCKED:return"Locked";case s.UNLOCKED:return"Unlocked"}}static getDoorStateIcon(i){switch(i){case r.CLOSED:return"door_front";case r.OPEN:return"meeting_room"}}static getDoorStateText(i){switch(i){case r.CLOSED:return"Closed";case r.OPEN:return"Open"}}static getDoorStateColor(i){switch(i){case r.CLOSED:return"red";case r.OPEN:return"green"}}static getTemperatureColor(i){return i>=90?"red":i<=32?"blue":"green"}static getHumidityColor(i){return i>=90?"red":"green"}static getDoorStateData(i){return{icon:this.getDoorStateIcon(i),text:this.getDoorStateText(i),iconColor:this.getDoorStateColor(i)}}static getUnitStateData(i){let e;return i===s.ALARM&&(e={icon:"error_outline",text:"An alarm has been tripped"}),{icon:this.getUnitStateIcon(i),text:this.getUnitStateText(i),iconColor:this.getUnitStateColor(i),badge:e}}static getTemperatureData(i){let e;return i>95?e={icon:b,text:"The temperature is above the specified threshold"}:i<31&&(e={icon:b,text:"The temperature is below the specified threshold"}),{icon:"thermostat",text:`${i} F`,iconColor:this.getTemperatureColor(i),badge:e}}static getHumidityData(i){let e;return i>95&&(e={icon:w,text:"The humidity level is above the specified threshold"}),{icon:w,text:`${i}%`,iconColor:this.getHumidityColor(i),badge:e}}}var tt=a(1552),et=a(346),nt=a(8590);function it(n,i){if(1&n&&(t.TgZ(0,"mat-icon"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.Akn(e.iconColorStyle),t.xp6(1),t.Oqu(e.icon)}}function ot(n,i){1&n&&t._UZ(0,"mat-spinner",10)}function at(n,i){if(1&n&&(t.YNc(0,it,2,3,"mat-icon",8),t.ALo(1,"async"),t.YNc(2,ot,1,0,"ng-template",null,9,t.W1O)),2&n){const e=t.MAs(3),o=t.oxw();t.Q6J("ngIf",t.lcZ(1,2,o.hasLoaded))("ngIfElse",e)}}function st(n,i){}function rt(n,i){if(1&n&&(t.TgZ(0,"div",11),t.YNc(1,st,0,0,"ng-template",12),t.qZA()),2&n){const e=t.oxw(),o=t.MAs(1);t.Q6J("matBadge",e.badge.icon)("matTooltip",e.badge.text),t.xp6(1),t.Q6J("ngTemplateOutlet",o)}}function ct(n,i){}function lt(n,i){if(1&n&&(t.TgZ(0,"div",13),t.YNc(1,ct,0,0,"ng-template",12),t.qZA()),2&n){t.oxw();const e=t.MAs(1);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function dt(n,i){if(1&n&&(t.TgZ(0,"span",14),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.text)}}function ut(n,i){1&n&&t._UZ(0,"mat-spinner",10)}let pt=(()=>{class n{constructor(){this.indicatorClicked=e=>{this.clickable&&(this.ripple.launch(e.x,e.y),this.updateUnitData())},this.clickable=!1,this.updated=new t.vpe(!0),this.data=new G.t,this.hasLoaded=new C.X(!1)}set unitData(e){e&&this.data.next(e)}set type(e){this._indicatorType=e,this.title=e.toString().toLowerCase()}ngOnInit(){this.data.pipe((0,I.h)(e=>!!e),(0,T.b)(e=>this._currentData=e),(0,_.U)(e=>{switch(this._indicatorType){case l.DOOR:return this.clickable=!0,f.getDoorStateData(e.doorState);case l.HUMIDITY:return f.getHumidityData(e.lastHumidity);case l.TEMP:return f.getTemperatureData(e.lastTemperature);case l.STATE:return f.getUnitStateData(e.state)}})).subscribe(e=>{this.icon=e.icon,this.iconColorStyle=`color: ${(n=>{switch(n){case"green":return"#76ff03";case"red":return"#ff1744";case"blue":return"#2962ff";default:return"#000"}})(e.iconColor)};`,this.text=e.text,this.badge=e.badge,this.hasLoaded.next(!0)})}dataHasBadge(e){return!!e.badge&&e.badge.hasOwnProperty("icon")}updateUnitData(){switch(this._indicatorType){case l.DOOR:this.updateDoorState()}this.data.next(this._currentData),this.updated.emit(this._currentData)}updateDoorState(){this._currentData.doorState=this._currentData.doorState===r.OPEN?r.CLOSED:r.OPEN}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-unit-indicator"]],viewQuery:function(e,o){if(1&e&&t.Gf(M.wG,5),2&e){let c;t.iGM(c=t.CRH())&&(o.ripple=c.first)}},hostVars:2,hostBindings:function(e,o){1&e&&t.NdJ("click",function(x){return o.indicatorClicked(x)}),2&e&&t.ekj("clickable",o.clickable)},inputs:{unitData:"unitData",type:"type"},outputs:{updated:"updated"},decls:13,vars:9,consts:[["iconWrapper",""],["class","icon-wrapper has-badge","matBadgeOverlap","true","matBadgeSize","small","matTooltipPosition","after",3,"matBadge","matTooltip",4,"ngIf"],["class","icon-wrapper no-badge",4,"ngIf"],[1,"indicator-text"],[1,"indicator-title"],["class","indicator-value",4,"ngIf","ngIfElse"],["textLoading",""],["matRipple","",1,"ripple-wrapper"],[3,"style",4,"ngIf","ngIfElse"],["iconLoading",""],["diameter","18"],["matBadgeOverlap","true","matBadgeSize","small","matTooltipPosition","after",1,"icon-wrapper","has-badge",3,"matBadge","matTooltip"],[3,"ngTemplateOutlet"],[1,"icon-wrapper","no-badge"],[1,"indicator-value"]],template:function(e,o){if(1&e&&(t.YNc(0,at,4,4,"ng-template",null,0,t.W1O),t.YNc(2,rt,2,3,"div",1),t.YNc(3,lt,2,1,"div",2),t.TgZ(4,"div",3),t.TgZ(5,"span",4),t._uU(6),t.ALo(7,"titlecase"),t.qZA(),t.YNc(8,dt,2,1,"span",5),t.ALo(9,"async"),t.YNc(10,ut,1,0,"ng-template",null,6,t.W1O),t.qZA(),t._UZ(12,"div",7)),2&e){const c=t.MAs(11);t.xp6(2),t.Q6J("ngIf",o.badge),t.xp6(1),t.Q6J("ngIf",!o.badge),t.xp6(3),t.Oqu(t.lcZ(7,5,o.title)),t.xp6(2),t.Q6J("ngIf",t.lcZ(9,7,o.hasLoaded))("ngIfElse",c)}},directives:[d.O5,M.wG,tt.Hw,Z.$g,et.k,nt.gM,d.tP],pipes:[d.rS,d.Ov],styles:['[_nghost-%COMP%]{background-color:#b39ddb33;border-radius:8px;display:flex;justify-content:space-between;align-items:center;padding:0 12px;flex:1}.clickable[_nghost-%COMP%]{cursor:pointer}.icon-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:.4rem;background:white;border-radius:8px;margin-right:8px;margin-left:-2px}.icon-wrapper.has-badge[_ngcontent-%COMP%]   .mat-badge-content[_ngcontent-%COMP%]{font-family:"Material Icons",emoji;background-color:red;font-size:13px;line-height:17px;pointer-events:none}.indicator-text[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:space-between;align-items:center}.indicator-text[_ngcontent-%COMP%]   .indicator-title[_ngcontent-%COMP%]{color:#9575cde6}.indicator-text[_ngcontent-%COMP%]   .indicator-value[_ngcontent-%COMP%]{font-weight:500;font-size:1rem}.ripple-wrapper[_ngcontent-%COMP%]{pointer-events:none;position:absolute;top:0;bottom:0;left:0;right:0}']}),n})();function mt(n,i){if(1&n&&(t.TgZ(0,"mat-grid-tile",3),t._UZ(1,"app-unit-indicator",4),t.ALo(2,"async"),t.qZA()),2&n){const e=i.$implicit,o=t.oxw();t.xp6(1),t.Q6J("type",e)("unitData",t.lcZ(2,2,o.unitData))}}let gt=(()=>{class n{constructor(e){this.unitsService=e,this.unitIndicators=[l.DOOR,l.HUMIDITY,l.STATE,l.TEMP],this._unitData=new C.X(null),this.unitData=this._unitData.pipe((0,I.h)(o=>!!o))}set unit(e){this._unit=e,this.unitsService.getUnitData(e).subscribe(this._unitData)}get unit(){return this._unit}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-unit-preview"]],inputs:{unit:"unit"},decls:9,vars:3,consts:[[1,"mat-elevation-z0","unit-card"],["cols","2","rowHeight","55px","gutterSize","5px"],["class","unit-indicator-tile",4,"ngFor","ngForOf"],[1,"unit-indicator-tile"],[3,"type","unitData"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-card",0),t.TgZ(1,"mat-card-header"),t.TgZ(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"mat-card-content"),t.TgZ(7,"mat-grid-list",1),t.YNc(8,mt,3,4,"mat-grid-tile",2),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",o.unit.name," "),t.xp6(2),t.hij(" ",o.unit.location," "),t.xp6(3),t.Q6J("ngForOf",o.unitIndicators))},directives:[m.a8,m.dk,m.n5,m.$j,m.dn,h.Il,d.sg,h.DX,pt],pipes:[d.Ov],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.mat-card[_ngcontent-%COMP%]{flex:1;border-radius:8px;padding:.8em}.unit-card[_ngcontent-%COMP%]  .mat-card-header-text{margin-left:5px;margin-top:8px}.unit-card[_ngcontent-%COMP%]  .mat-card-header-text mat-card-subtitle{margin-bottom:8px}"]}),n})();function ht(n,i){1&n&&t._UZ(0,"app-loading-shade")}function ft(n,i){if(1&n&&(t.TgZ(0,"mat-grid-tile",5),t._UZ(1,"app-unit-preview",6),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("unit",e)}}let Ct=(()=>{class n{constructor(e){this.unitsService=e,this.isLoading=new C.X(!0),this.units=this.unitsService.getUnits().pipe((0,T.b)(()=>this.isLoading.next(!1)))}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-units-grid"]],decls:7,vars:6,consts:[[1,"units-grid-inner"],[4,"ngIf"],[1,"grid-list-wrapper"],["cols","2","rowHeight","200px","gutterSize","15px"],["class","unit-tile",4,"ngFor","ngForOf"],[1,"unit-tile"],[3,"unit"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,ht,1,0,"app-loading-shade",1),t.ALo(2,"async"),t.TgZ(3,"div",2),t.TgZ(4,"mat-grid-list",3),t.YNc(5,ft,2,1,"mat-grid-tile",4),t.ALo(6,"async"),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,o.isLoading)),t.xp6(4),t.Q6J("ngForOf",t.lcZ(6,4,o.units)))},directives:[d.O5,h.Il,d.sg,F,h.DX,gt],pipes:[d.Ov],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column}.units-grid-inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.6em;font-weight:500}.unit-tile[_ngcontent-%COMP%]  .mat-grid-tile-content{flex-direction:column;justify-content:unset!important;align-items:unset!important}.grid-list-wrapper[_ngcontent-%COMP%]{margin-top:1em}"]}),n})();var Dt=a(6682),Ot=a(9761),xt=a(3190),yt=a(5304),P=a(1494),N=a(7082),u=a(2789);function Tt(n,i){1&n&&(t.TgZ(0,"th",10),t._uU(1,"Credential"),t.qZA())}function Ut(n,i){if(1&n&&(t.TgZ(0,"td",11),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.credential)}}function vt(n,i){1&n&&(t.TgZ(0,"th",10),t._uU(1,"Accessed At"),t.qZA())}function At(n,i){if(1&n&&(t.TgZ(0,"td",11),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.date))}}function Zt(n,i){1&n&&(t.TgZ(0,"th",10),t._uU(1,"Unit"),t.qZA())}function It(n,i){if(1&n&&(t.TgZ(0,"td",11),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.xp6(1),t.Oqu(e.unitName)}}function _t(n,i){1&n&&t._UZ(0,"tr",12)}function Mt(n,i){1&n&&t._UZ(0,"tr",13)}let bt=(()=>{class n{constructor(e){this.unitsService=e,this.isLoading=!0,this.displayedColumns=["credential","date","unit"],this.accessHistoryData=[],this.total=0}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),(0,Dt.T)(this.sort.sortChange,this.paginator.page).pipe((0,Ot.O)({}),(0,xt.w)(()=>(this.isLoading=!0,this.unitsService.getUnitAccessHistory().pipe((0,yt.K)(()=>(0,p.of)([]))))),(0,_.U)(e=>(this.isLoading=!1,null===e?[]:(this.total=e.length,e)))).subscribe(e=>this.accessHistoryData=e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-access-history"]],viewQuery:function(e,o){if(1&e&&(t.Gf(N.NW,5),t.Gf(P.YE,5)),2&e){let c;t.iGM(c=t.CRH())&&(o.paginator=c.first),t.iGM(c=t.CRH())&&(o.sort=c.first)}},inputs:{unit:"unit"},decls:14,vars:5,consts:[[1,"access-table-container"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",1,"access-table",3,"dataSource"],["matColumnDef","credential"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","unit"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"table",1),t.ynx(2,2),t.YNc(3,Tt,2,0,"th",3),t.YNc(4,Ut,2,1,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,vt,2,0,"th",3),t.YNc(7,At,3,3,"td",4),t.BQk(),t.ynx(8,6),t.YNc(9,Zt,2,0,"th",3),t.YNc(10,It,2,1,"td",4),t.BQk(),t.YNc(11,_t,1,0,"tr",7),t.YNc(12,Mt,1,0,"tr",8),t.qZA(),t.qZA(),t._UZ(13,"mat-paginator",9)),2&e&&(t.xp6(1),t.Q6J("dataSource",o.accessHistoryData),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.total)("pageSize",30))},directives:[u.BZ,P.YE,u.w1,u.fO,u.Dz,u.as,u.nj,N.NW,u.ge,u.ev,u.XQ,u.Gk],pipes:[d.uU],styles:["[_nghost-%COMP%]{flex:1;display:flex;flex-direction:column;border-radius:8px;overflow:hidden}.access-table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),n})(),wt=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-client-dashboard"]],decls:12,vars:0,consts:[[1,"section"],[1,"section-title"],[1,"section-content"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"span"),t._uU(3,"Units"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t._UZ(5,"app-units-grid"),t.qZA(),t.qZA(),t.TgZ(6,"div",0),t.TgZ(7,"div",1),t.TgZ(8,"span"),t._uU(9,"Access History"),t.qZA(),t.qZA(),t.TgZ(10,"div",2),t._UZ(11,"app-access-history"),t.qZA(),t.qZA())},directives:[Ct,bt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;padding:2.5em;flex:1}.section[_ngcontent-%COMP%]{margin-top:1.5em}.section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{margin-bottom:1em}.section[_ngcontent-%COMP%]:first-child{margin-top:0!important}.section[_ngcontent-%COMP%]:first-child   .section-title[_ngcontent-%COMP%]{margin-bottom:0!important}"]}),n})();var L=a(4655),Pt=a(2271);const Nt=[{path:"dashboard",component:wt}];let Lt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,L.Bz.forChild(Nt),Pt.m],L.Bz]}),n})()}}]);